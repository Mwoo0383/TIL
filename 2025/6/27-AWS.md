# AWS ê¸°ì´ˆ ê³¼ì • ì‹¤ìŠµ

## ğŸ“Œ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

### 1. VPC(Virtual Private Cloud) ì´í•´í•˜ê¸°
- VPCë¥¼ ì´ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì •ì˜í•œ ê°€ìƒì˜ ë„¤íŠ¸ì›Œí¬ ê³µê°„ ì•ˆì—ì„œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŒ
- VPCëŠ” AWS í´ë¼ìš°ë“œì˜ ê²©ë¦¬ëœ ë¶€ë¶„. EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ ê°™ì€ AWS ê°ì²´ë¡œ ì±„ì›Œì§

#### VPC ìƒì„±í•˜ê¸°
- **ì´ë¦„**
: VPC-Lab
- **IPv4 CIDR ë¸”ë¡**
: 10.0.0.0/16
- **ê°€ìš© ì˜ì—­(az)**
: ap-northest-2a, 1ê°œ
- **ì„œë¸Œë„·**
: í¼ë¸”ë¦­ 1ê°œ - 10.0.10.0/24, í”„ë¼ì´ë¹— 0ê°œ
- **ì„œë¸Œë„· ì´ë¦„**
: public subnet A
![ì•„í‚¤í…ì²˜ êµ¬ì„±](ì•„í‚¤í…ì²˜-VPC.png)

â—ï¸CIDR(Classless Inter-Domain Routing) ì£¼ì†Œ ë²”ìœ„ ì´í•´í•˜ê¸°
- ë„¤íŠ¸ì›Œí¬ì˜ ì£¼ì†Œì™€ í¬ê¸°ë¥¼ í‘œí˜„í•˜ëŠ” ë°©ì‹ ì¤‘ í•˜ë‚˜
- **IP ì£¼ì†Œ + ì„œë¸Œë„· ë§ˆìŠ¤í¬**
- **ì„œë¸Œë„· ë§ˆìŠ¤í¬**
: IP ì£¼ì†Œë¥¼ ë„¤íŠ¸ì›Œí¬ ë¶€ë¶„ê³¼ í˜¸ìŠ¤íŠ¸ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ìœ„í•œ ê¸°ì¤€ì„ 
- 255.0.0.0 -> /8, 255.255.0.0 -> /16, 255.255.255.0 -> /24, 255.255.255.128 -> /25, 255.255.255.240 -> /29
- ì‹¤ì œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” IP ìˆ˜ëŠ” -2 í•´ì•¼í•¨. ì²« IPëŠ” ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ, ë§ˆì§€ë§‰ IPëŠ” ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì£¼ì†Œ.

### 2. ì¶”ê°€ subnet ìƒì„±í•˜ê¸°
- ê³ ê°€ìš©ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´, ë‹¤ì¤‘ ê°€ìš© ì˜ì—­ì— ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”
- **ì„œë¸Œë„· ì´ë¦„**
: public subnet C
- **ê°€ìš© ì˜ì—­**
: ì•„ì‹œì•„ íƒœí‰ì–‘ (ì„œìš¸) / ap-northeast-2c
- **IPv4 ì„œë¸Œë„· CIDR ë¸”ë¡**
: 10.0.20.0/24
![ì•„í‚¤í…ì²˜ êµ¬ì„±2](ì•„í‚¤í…ì²˜-ì„œë¸Œë„·.png)

### 3. ë¼ìš°íŒ… í…Œì´ë¸” í¸ì§‘í•˜ê¸°

#### VPC ë¼ìš°íŒ… í…Œì´ë¸” ê°œë…
- ì„œë¸Œë„· ë˜ëŠ” ê²Œì´íŠ¸ ì›¨ì´ì˜ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”¼ì´ ì „ì†¡ë˜ëŠ” ìœ„ì¹˜ë¥¼ ê²°ì •í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” **ë¼ìš°íŒ…**ì´ë¼ëŠ” ê·œì¹™ ì§‘í•©ì´ í¬í•¨ë˜ì–´ ìˆìŒ
- **ê¸°ë³¸ ë¼ìš°íŒ… í…Œì´ë¸”**
: VPCì™€ í•¨ê»˜ ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ë¼ìš°íŒ… í…Œì´ë¸”. ëª¨ë“  ì„œë¸Œë„·ì˜ ë¼ìš°íŒ…ì„ ì œì–´
- **ì‚¬ìš©ì ì§€ì • ë¼ìš°íŒ… í…Œì´ë¸”**
: ê¸°ë³¸ ë¼ìš°íŒ… í…Œì´ë¸” ì™¸ì— ì‚¬ìš©ìê°€ ìƒì„±í•œ ë¼ìš°íŒ… í…Œì´ë¸”

#### ë¼ìš°íŒ… í…Œì´ë¸” ì—°ê²° í¸ì§‘
- ì„œë¸Œë„· ë©”ë‰´ì—ì„œ public subnet C -> ì‘ì—… -> ë¼ìš°íŒ… í…Œì´ë¸” ì—°ê²° í¸ì§‘
- ë¼ìš°íŒ… í…Œì´ë¸” IDì—ì„œ ê¸°ë³¸ ë¼ìš°íŒ… í…Œì´ë¸”ì´ ì•„ë‹Œ ë‹¤ë¥¸ ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„ íƒ, ì €ì¥
- public subnet Cë„ ì¸í„°ë„·ìœ¼ë¡œ í–¥í•˜ëŠ” ê²½ë¡œê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
![ì•„í‚¤í…ì²˜ êµ¬ì„±3](ì•„í‚¤í…ì²˜-ë¼ìš°íŒ….png)

### 4. ë³´ì•ˆ ê·¸ë£¹ ìƒì„±í•˜ê¸°

#### ë³´ì•ˆ ê·¸ë£¹ ìƒì„±
- ë³´ì•ˆ ê·¸ë£¹ì€ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì¸ë°”ìš´ë“œ ë° ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì„ ì œì–´í•˜ëŠ” ê°€ìƒ ë°©í™”ë²½ ì—­í• 
- ë³´ì•ˆ ê·¸ë£¹ -> ë³´ì•ˆ ê·¸ë£¹ ìƒì„±
- **ë³´ì•ˆ ê·¸ë£¹ ì´ë¦„**
: webserver-sg
- **ì„¤ëª…**
: security group for web servers
- **VPC**
: (VPC-Lab) ì„ íƒ
- **ì¸ë°”ìš´ë“œ ê·œì¹™**
: SSH, HTTP -> ë‚´ IP

## ğŸ“Œ ì›¹ ì„œë²„ ìƒì„±í•˜ê¸°
- **EC2(Elastic Compute Cloud) ì´í•´í•˜ê¸°**
: í•˜ë“œì›¨ì–´ ì„ íˆ¬ì ì—†ì´ ë” ë¹ ë¥´ê²Œ ì•± ê°œë°œ, ë°°í¬ ê°€ëŠ¥. ì›í•˜ëŠ” ë§Œí¼ ê°€ìƒ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³  ë³´ì•ˆ ë° ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ê³¼ ìŠ¤í† ë¦¬ì§€ ê´€ë¦¬ ê°€ëŠ¥.
![ì•„í‚¤í…ì²˜ êµ¬ì„±4](ì•„í‚¤í…ì²˜-EC2.png)

### 1. ì›¹ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘
- **ì´ë¦„**
: webserver 1
- **Quick Start**
: image > Amazon Linux 2 AMI (HVM) - Kernel 5.10, SSD Volume Type. ì•„í‚¤í…ì²˜ > 64ë¹„íŠ¸(x86)
- **ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•**
: t2.micro
- **í‚¤ í˜ì–´ ìƒì„±**
: ì´ë¦„ > keypair-seoul, ìœ í˜• > RSA, í˜•ì‹ > .pem >> í‚¤ í˜ì–´ ìƒì„±
- **ë„¤íŠ¸ì›Œí¬ ì„¤ì •**
: í¸ì§‘ í´ë¦­ -> VPC-Lab, public subnet A, í¼ë¸”ë¦­ IP ìë™ í• ë‹¹ í™œì„±í™” -> ê¸°ì¡´ ë³´ì•ˆê·¸ë£¹ ì„ íƒ, webserver-sg -> ìŠ¤í† ë¦¬ì§€ êµ¬ì„± 8, gp2 -> ê³ ê¸‰ ì„¸ë¶€ ì •ë³´ì— ì•„ë˜ ì½”ë“œ ë³µë¶™ í›„ ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘
```
#!/bin/sh
        
# Install a LAMP stack
sudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2
sudo yum -y install httpd php-mbstring
sudo yum -y install git
        
# Start the web server
sudo chkconfig httpd on
sudo systemctl start httpd
        
# Install the web pages for our lab
if [ ! -f /var/www/html/aws-boarding-pass-webapp.tar.gz ]; then
    cd /var/www/html
    wget -O 'techcamp-webapp-2024.zip' 'https://ws-assets-prod-iad-r-icn-ced060f0d38bc0b0.s3.ap-northeast-2.amazonaws.com/600420b7-5c4c-498f-9b80-bc7798963ba3/techcamp-webapp-2024.zip'
    unzip techcamp-webapp-2024.zip
    sudo mv techcamp-webapp-2024/* .
    sudo rm -rf techcamp-webapp-2024
    sudo rm -rf techcamp-webapp-2024.zip
fi
        
# Install the AWS SDK for PHP
if [ ! -f /var/www/html/aws.zip ]; then
    cd /var/www/html
    sudo mkdir vendor
    cd vendor
    sudo wget https://docs.aws.amazon.com/aws-sdk-php/v3/download/aws.zip
    sudo unzip aws.zip
fi
        
# Update existing packages
sudo yum -y update
```

â­•ï¸ ì„±ê³µ ì‹œ
![EC2 ì‹œì‘](EC2-ì¸ìŠ¤í„´ìŠ¤ì‹œì‘.png)

í˜„ì¬ ì•„í‚¤í…ì²˜ ìƒí™©
![EC2 ì•„í‚¤í…ì²˜](ì•„í‚¤í…ì²˜-EC2ì‹œì‘.png)